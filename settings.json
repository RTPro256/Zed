// Folder-specific settings
//
// For a full list of overridable settings, and general information on folder-specific settings,
// see the documentation: https://zed.dev/docs/configuring-zed#settings-files
//
// To see all of Zed's default settings without changing your
// custom settings, run `zed: open default settings` from the
// command palette (cmd-shift-p / ctrl-shift-p)
//
// Local installs: [https://ollama.com/, https://claude.com/download]
{
  // Autosave
  "autosave": { "after_delay": { "milliseconds": 500 } },
  "colorize_brackets": true,
  // "show_whitespaces": "boundary",  // turns on left justification whitespace
  "wrap_guides": [80, 120],

  "diagnostics": {
    // Only show inline diagnostics for errors
    "inline": {
      "enabled": true,
      "max_severity": "error",
    },
  },

  // Editor: inlay hints
  "inlay_hints": {
    // Show on Ctrl+Alt
    "toggle_on_modifiers_press": {
      "control": true,
      "alt": true,
    },
  },

  // Language-specific settings
  "languages": {
    "Python": {
      "format_on_save": "off",
      "wrap_guides": [79],
      "language_servers": [
        // Disable basedpyright and enable ty, and otherwise
        // use the default configuration.
        "!basedpyright",
        "ty",
        "ruff",
        "pyright",
        "python-lsp-server",
      ], // Astral stack ftw
      // Or use `"formatter": null` to disable formatting entirely.
      "formatter": {
        "external": {
          "command": "black",
          "arguments": ["--stdin-filename", "{buffer_path}", "-"],
        },
      },
    },
    "Java": {
      // Java moment
      "wrap_guides": [120],
    },
  },

  // Language server settings
  "lsp": {
    "basedpyright": {
      "settings": {
        "basedpyright.analysis": {
          "diagnosticMode": "workspace",
          "inlayHints": {
            "callArgumentNames": false,
          },
          "diagnosticSeverityOverrides": {
            // I like implicit string concatenation when formatting long strings
            "reportImplicitStringConcatenation": "none",
          },
        },
      },
    },
    "jdtls": {
      "settings": {
        "initialization_options": {
          "bundles": [],
          // use this if your zed project root folder is not the same as the java project root:
          // "workspaceFolders": ["file:///home/snjeza/Project"],
          "settings": {
            "java": {
              "home": "%APPDATA%\\.jdk\\jdk-25.0.1.8-hotspot",
              "errors": {
                "incompleteClasspath": {
                  "severity": "warning",
                },
              },
              "configuration": {
                "updateBuildConfiguration": "interactive",
                "maven": {
                  "userSettings": null,
                },
              },
              "import": {
                "gradle": {
                  "enabled": false,
                },
                "maven": {
                  "enabled": true,
                },
                "exclusions": [
                  "**/node_modules/**",
                  "**/.metadata/**",
                  "**/archetype-resources/**",
                  "**/META-INF/maven/**",
                  "/**/test/**",
                ],
              },
              "referencesCodeLens": {
                "enabled": false,
              },
              "signatureHelp": {
                "enabled": false,
              },
              "implementationCodeLens": "all",
              "format": {
                "enabled": true,
              },
              "saveActions": {
                "organizeImports": false,
              },
              "contentProvider": {
                "preferred": null,
              },
              "autobuild": {
                "enabled": false,
              },
              "completion": {
                "favoriteStaticMembers": [
                  "org.junit.Assert.*",
                  "org.junit.Assume.*",
                  "org.junit.jupiter.api.Assertions.*",
                  "org.junit.jupiter.api.Assumptions.*",
                  "org.junit.jupiter.api.DynamicContainer.*",
                  "org.junit.jupiter.api.DynamicTest.*",
                ],
                "importOrder": ["java", "javax", "com", "org"],
              },
            },
          },
        },
        "java": {
          // What is the difference home vs java_home? Reference: https://github.com/zed-extensions/java
          "home": "%APPDATA%\\.jdk\\jdk-25.0.1.8-hotspot",
          "java_home": "%APPDATA%\\.jdk\\jdk-25.0.1.8-hotspot",

          "lombok_support": true,
          "jdk_auto_download": false,

          // Controls when to check for updates for JDTLS, Lombok, and Debugger
          // - "always" (default): Always check for and download the latest version
          // - "once": Check for updates only if no local installation exists
          // - "never": Never check for updates, only use existing local installations (errors if missing)
          //
          // Note: Invalid values will default to "always"
          // If custom paths (below) are provided, check_updates is IGNORED for that component
          "check_updates": "always",

          // Use custom installations instead of managed downloads
          // When these are set, the extension will not download or manage these components
          // [(https://download.eclipse.org/jdtls/milestones/?d), (https://download.eclipse.org/jdtls/snapshots/?d)]
          // "jdtls_launcher": "%APPDATA%\\.jdk\\jdt-language-server-1.9.0-202203031534", // Milestone
          "jdtls_launcher": "%APPDATA%\\.jdk\\jdt-language-server-1.57.0-202602031454", // Snapshot
          // "lombok_jar": "/path/to/your/lombok.jar",
          // "java_debug_jar": "/path/to/your/com.microsoft.java.debug.plugin.jar",
        },
      },
    },
    // Error - "nil" : Property nil is not allowed.
    // "nil": {
    //   "initialization_options": {
    //     "formatting": {
    //       "command": ["nixfmt"],
    //     },
    //   },
    // },
  },

  "language_models": {
    "ollama": {
      "api_url": "http://localhost:11434",
      "auto_discover": true,
      "available_models": [
        {
          // Configure specific model settings.
          "name": "qwen3-coder",
          "display_name": "qwen 3 coder",
          "max_tokens": 262144,
          "supports_tools": true,
          "supports_thinking": true,
          "supports_images": true,
        },
      ],
    },
    "anthropic": {
      "available_models": [
        {
          "name": "claude-sonnet-4-5-20250929",
          "display_name": "Sonnet 4.5",
          "max_tokens": 128000,
          "max_output_tokens": 2560,
          "cache_configuration": {
            "max_cache_anchors": 10,
            "min_total_token": 10000,
            "should_speculate": false,
          },
          "tool_override": "some-model-that-supports-toolcalling",
        },
      ],
    },
  },

  "agent": {
    "always_allow_tool_actions": true,
    "single_file_review": true,

    "default_model": {
      "provider": "zed.dev",
      "model": "claude-sonnet-4",
    },
    "inline_assistant_model": {
      "provider": "anthropic",
      "model": "claude-sonnet-4",
    },
    "inline_alternatives": [
      {
        "provider": "zed.dev",
        "model": "gpt-4-mini",
      },
      {
        "provider": "zed.dev",
        "model": "gemini-2.5-flash",
      },
    ],
    "commit_message_model": {
      "provider": "openai",
      "model": "gpt-4o-mini",
    },
  },
}
